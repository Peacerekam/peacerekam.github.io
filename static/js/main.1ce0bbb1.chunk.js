(this.webpackJsonpgochart=this.webpackJsonpgochart||[]).push([[0],{104:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(93),s=n.n(r),o=(n(104),n(6)),i=n(4),l=n(23),u=n.n(l),d=n(56),b=n(7),j=n(99);function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e+Math.random()*(t-e)).toFixed(n)}function f(){var e=h(1,360),t=h(35,100),n=h(50,85);return"hsla(".concat(e,", ").concat(t,"%, ").concat(n,"%, 0.35)")}function p(e,t){if(!e)return"";var n=e.split(", ");return n[3]="".concat(t,")"),n.join(", ")}var v=n(15),O=n(16),x=n(98),m=n(238),g=n(58),N=n.n(g),k=n(3),C="https://mimee.ovh",y=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),s=Object(b.a)(r,2),l=s[0],h=s[1],g=Object(a.useState)(),y=Object(b.a)(g,2),w=y[0],S=y[1],T=Object(a.useState)(""),E=Object(b.a)(T,2),D=E[0],M=E[1],z=Object(a.useState)(""),F=Object(b.a)(z,2),R=F[0],B=F[1],J=Object(a.useState)(""),G=Object(b.a)(J,2),V=G[0],X=G[1],Y=Object(a.useState)([]),A=Object(b.a)(Y,2),I=A[0],K=A[1],L=Object(a.useState)(1),P=Object(b.a)(L,2),W=P[0],H=P[1],q=Object(a.useState)(!1),Q=Object(b.a)(q,2),U=Q[0],Z=Q[1],$=Object(a.useState)(!1),_=Object(b.a)($,2),ee=_[0],te=_[1],ne=Object(a.useState)(""),ae=Object(b.a)(ne,2),ce=ae[0],re=ae[1],se=Object(a.useState)(null),oe=Object(b.a)(se,2),ie=oe[0],le=oe[1];Object(a.useEffect)((function(){var e=window.location.pathname;e.startsWith("/share/")&&ue(e.replace("/share/",""))}),[]),Object(a.useEffect)((function(){document.title=V||"Charts for Genshin Optimizer"}),[V]),Object(a.useEffect)((function(){var e=n.slice(),t=null;e.forEach((function(e){var n,a,c,r;1===W?(null===t||Number(null===(n=e.data[0])||void 0===n?void 0:n.x)<t)&&(t=Number(null===(a=e.data[0])||void 0===a?void 0:a.x)):(null===!t||Number(null===(c=e.data[e.data.length-1])||void 0===c?void 0:c.x)>t)&&(t=Number(null===(r=e.data[e.data.length-1])||void 0===r?void 0:r.x))}));var a=[];e.forEach((function(e){a.push(e);var n=je(e,t);a.push(n)})),K(a)}),[n,W]),Object(a.useEffect)((function(){le(null)}),[n,W,D,R,V]);var ue=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return Z(!0),n="".concat(C,"/api/share/").concat(t),e.prev=4,e.next=7,N.a.get(n);case 7:a=e.sent,setTimeout((function(){H(a.data.lineMode),c(a.data.datasets),M(a.data.suffixX),B(a.data.suffixY),X(a.data.chartName),setTimeout((function(){return le(t)}),0),Z(!1)}),500),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),Z(!1);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),t="".concat(C,"/api/share/"),e.prev=2,a={lineMode:W,datasets:n,suffixX:D,suffixY:R,chartName:V},e.next=6,N.a.post(t,a);case 6:c=e.sent,window.history.pushState("","Charts for Genshin Optimizer","/share/".concat(c.data.id)),le(c.data.id),setTimeout((function(){te(!1),re("Success!"),be()}),500),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){te(!1),re("Error!"),be()}),500);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),be=function(){return setTimeout((function(){return re("")}),4e3)},je=function(e,t){var n,a=JSON.parse(JSON.stringify(e));a.label=fe("Max(".concat(e.label,")")),a.backgroundColor=p(a.backgroundColor,1),a.borderColor=p(a.backgroundColor,.5);var c,r=1===W?function(e,t){return Number(e.x)-Number(t.x)}:function(e,t){return Number(t.x)-Number(e.x)},s=a.data.sort(r),o=[],l=Object(i.a)(s);try{for(l.s();!(c=l.n()).done;){for(var u=c.value,d=void 0;d=o.pop();)if(Number(d.y)>Number(u.y)){o.push(d);break}o.push(u)}}catch(b){l.e(b)}finally{l.f()}return o.forEach((function(e){e.min=e.y})),a.data=[{x:t,y:null===(n=o[0])||void 0===n?void 0:n.y}].concat(o),a},he={responsive:!0,plugins:{legend:{display:!1}},scales:{x:{type:"linear",grid:{color:"#acaeb399",borderDash:[2,2]},ticks:{color:"#ebecee",callback:function(e,t,n){return"".concat(e).concat(D)}}},y:{grid:{color:"#acaeb399",borderDash:[2,2]},ticks:{color:"#ebecee",callback:function(e,t,n){return"".concat(e).concat(R)}}}},interaction:{intersect:!1},animation:{duration:0}},fe=function(e){for(var t=n.map((function(e){return e.label}));t.includes(e);)e="".concat("\u200b").concat(e);return e},pe=function(e,t){var a=n.slice();a[t].label=fe(e.currentTarget.value),c(a)},ve=function(e,t){var a=n.slice();a.splice(e+t,0,a.splice(e,1)[0]),c(a)};return Object(k.jsxs)("div",{className:"page-wrapper",children:[ie&&Object(k.jsxs)("div",{className:"chart-link",children:["Share link:",Object(k.jsx)("input",{onClick:function(e){return e.currentTarget.setSelectionRange(0,e.currentTarget.value.length)},value:"".concat(C,"/share/").concat(ie)})]}),Object(k.jsx)("div",{className:"card-wrapper",children:Object(k.jsx)("div",{className:"card-content",children:U?Object(k.jsx)("div",{className:"loading-chart-wrapper",children:Object(k.jsx)(m.a,{className:"loading-chart",size:64})}):Object(k.jsxs)(k.Fragment,{children:[n.length>0&&Object(k.jsx)("div",{className:"paste-list",children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"charts-manager",children:ee?Object(k.jsx)(m.a,{className:"share-btn",size:32}):Object(k.jsxs)("div",{onClick:function(){return de()},className:"share-btn pointer spacing",children:[ce||"Save / Share",Object(k.jsx)(v.a,{icon:O.e})]})}),Object(k.jsxs)("div",{className:"smol-header",children:["Manage datasets",Object(k.jsx)("div",{className:"half-transparent",children:"(double click input to randomize new color)"})]}),Object(k.jsxs)("div",{className:"paste-container",children:[Object(k.jsx)("div",{className:"toolbox",tabIndex:0,children:Object(k.jsx)(x.a,{color:w,onChange:function(e){return S(e)},onChangeComplete:function(e){var t=n.slice(),a=e.hsl,r=a.h,s=a.s,o=a.l,i="hsla(".concat(r,", ").concat(100*s,"%, ").concat(100*o,"%, 0.35)");t[l].backgroundColor=i,c(t)}})}),n.map((function(e,t){return Object(k.jsxs)("span",{className:"single-paste",children:[Object(k.jsx)("input",{defaultValue:e.label,onFocus:function(){h(t),S(p(n[t].backgroundColor,1))},onBlur:function(e){return pe(e,t)},onKeyDown:function(e){"Enter"===e.key&&(pe(e,t),e.currentTarget.blur())},onDoubleClick:function(){return function(e){var t=n.slice(),a=f();t[e].backgroundColor=a,c(t),S(p(a,1))}(t)},style:{background:"linear-gradient(to right, ".concat(p(e.backgroundColor,1)," 0%, ").concat(p(e.backgroundColor,1)," 20%, #1b263b 20%)")}}),Object(k.jsx)("button",{title:"Remove dataset",className:"btn",onClick:function(){return function(e){var t=n.slice();t.splice(e,1),c(t)}(t)},children:Object(k.jsx)(v.a,{icon:O.f})}),Object(k.jsxs)("div",{className:"position-changer",children:[0!==t&&Object(k.jsx)("span",{title:"Move left",className:"arrow-btn",onClick:function(){return ve(t,-1)},children:Object(k.jsx)(v.a,{size:"xs",icon:O.c})}),t!==n.length-1&&Object(k.jsx)("span",{title:"Move right",className:"arrow-btn",onClick:function(){return ve(t,1)},children:Object(k.jsx)(v.a,{size:"xs",icon:O.d})})]})]},"label-".concat(e.label))}))]})]})}),Object(k.jsxs)("div",{className:"inputs-wrapper",children:[n.length>0&&Object(k.jsxs)("div",{className:"paste-wrapper",children:[Object(k.jsx)("input",{className:"chart-name-input",placeholder:"Chart name (e.g. Beidou Burst DMG vs ER%)",defaultValue:V||"",onBlur:function(e){return X(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&(X(e.currentTarget.value),e.currentTarget.blur())}}),Object(k.jsx)("div",{className:"set-line-btn",onClick:function(){return H(Number(!W))},children:W?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.a,{icon:O.a})," Descending Line"]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.a,{icon:O.b})," Ascending Line"]})})]}),Object(k.jsxs)("div",{className:"paste-wrapper",children:[Object(k.jsx)("textarea",{placeholder:"Paste Genshin Optimizer Chart's Min or Full Data here...",onChange:function(e){e&&e.preventDefault&&e.preventDefault();try{var t=e.currentTarget||e,a=t.value,r=JSON.parse(a).map((function(e){return{x:e[0].toFixed(2),y:e[1].toFixed(2)}})),s=f(),i={label:"Paste #".concat(n.length+1),data:r,stepped:"after",fill:!1,backgroundColor:p(s,.35),borderColor:"#00000000",borderWidth:3,pointHoverRadius:4,pointRadius:2,hidden:!1};S(p(s,1)),c([].concat(Object(o.a)(n),[i])),t.value=""}catch(l){console.log(l)}}}),n.length>0&&Object(k.jsxs)("div",{className:"flex-col",children:[Object(k.jsx)("input",{onChange:function(e){return B(e.currentTarget.value)},placeholder:"Y-axis (e.g. dmg)",defaultValue:R||""}),Object(k.jsx)("input",{onChange:function(e){return M(e.currentTarget.value)},placeholder:"X-axis (e.g. % ER)",defaultValue:D||""})]})]}),n.length>0&&Object(k.jsx)("div",{className:"chart-legend",children:n.map((function(e,t){return Object(k.jsx)("span",{onClick:function(){return function(e){var t=n.slice();t[e].hidden=!t[e].hidden,c(t)}(t)},style:{textDecoration:e.hidden?"line-through":"none",opacity:e.hidden?.4:1,cursor:"pointer",background:"linear-gradient(to right, ".concat(p(e.backgroundColor,1)," 0, ").concat(p(e.backgroundColor,1)," 2.5rem, transparent 2.5rem)")},children:e.label},"chart-legend-".concat(t))}))}),n.length>0&&Object(k.jsxs)("div",{className:"relative chart-wrapper",children:[Object(k.jsx)(j.a,{data:{datasets:I},options:he}),Object(k.jsx)("div",{className:"chart-overlay",children:V})]})]})]})})})]})};n(234);var w=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(y,{})})};s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(w,{})}),document.getElementById("root"))}},[[235,1,2]]]);
//# sourceMappingURL=main.1ce0bbb1.chunk.js.map